/**
 * Vanilla Javascript Sticky Table v1.0.0
 * https://zhitkovkostya.github.io/vanilla-js-sticky-table
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).StickyTable=t()}(this,function(){"use strict";var e={},t={};t.throttle=function(t,l=100){let r=null;return function(...e){null===r&&(r=setTimeout(()=>{t.apply(this,e),r=null},l))}};const n=t["throttle"];e.StickyTable=class{el=null;wrapperElement=null;headWrapperElement=null;bodyWrapperElement=null;scrollLeft=0;constructor(e){this.el=e,this._wrapTable(),this._wrapTableHead(),this._wrapTableBody(),this._syncColumnWidth(),this._syncHeadPosition(),this._handleWindowScrollThrottled=n(this._handleWindowScroll.bind(this),20),this._handleWindowResizeThrottled=n(this._handleWindowResize.bind(this),20),window.addEventListener("scroll",this._handleWindowScrollThrottled.bind(this),!1),window.addEventListener("resize",this._handleWindowResizeThrottled.bind(this))}_wrapTable(){const e=document.createElement("div");e.className="js-table-wrapper",this.el.parentNode.insertBefore(e,this.el),e.append(this.el),this.wrapperElement=e}_wrapTableHead(){const e=document.createElement("table"),t=this.el.tHead,l=Array.from(t.rows),r=Array.from(l.reduce((e,t)=>t.cells,[]));var i=t.cloneNode(!0);t.style.visibility="collapse",r.forEach(e=>{e.style.lineHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0}),e.classList.add("table"),this.headWrapperElement=document.createElement("div"),this.headWrapperElement.className="js-table-head-wrapper",this.headWrapperElement.dataset.isFixed=!1,this.headWrapperElement.style.overflowX="auto",this.headWrapperElement.ariaHidden=!0,this.headWrapperElement.appendChild(e).appendChild(i),this.wrapperElement.insertBefore(this.headWrapperElement,this.el),this._handleHeadWrapperHorizontalScrollThrottled=n(this._handleHorizontalScroll.bind(this),10),this.headWrapperElement.addEventListener("scroll",this._handleHeadWrapperHorizontalScrollThrottled.bind(this),!1)}_wrapTableBody(){this.bodyWrapperElement=document.createElement("div"),this.bodyWrapperElement.className="js-table-body-wrapper",this.bodyWrapperElement.style.overflowX="auto",this.wrapperElement.insertBefore(this.bodyWrapperElement,this.el),this.bodyWrapperElement.appendChild(this.el),this._handleBodyWrapperHorizontalScrollThrottled=n(this._handleHorizontalScroll.bind(this),10),this.bodyWrapperElement.addEventListener("scroll",this._handleBodyWrapperHorizontalScrollThrottled.bind(this),!1)}_syncColumnWidth(){var e,t=this.headWrapperElement.querySelector("table");let l,r;for(e of this.bodyWrapperElement.querySelector("table").tHead.rows)for(var i of e.cells)r=i.offsetWidth,l=t.tHead.rows[e.rowIndex].cells[i.cellIndex],l.style.minWidth=r+"px",l.style.maxWidth=r+"px"}_syncHeadPosition(){let e="true"===this.headWrapperElement.dataset.isFixed;var{width:t,height:l}=this.headWrapperElement.getBoundingClientRect(),{top:r,width:i,height:n}=this.bodyWrapperElement.getBoundingClientRect(),a=2*l,s=(e?0:l)<=r,d=n+r-l<=0;e&&(s||d)?(this.headWrapperElement.style.position=null,this.headWrapperElement.style.top=null,this.headWrapperElement.style.zIndex=null,this.headWrapperElement.style.width=null,this.bodyWrapperElement.style.paddingTop=null,this.headWrapperElement.dataset.isFixed=!1,e=!1):e||s||d||(this.headWrapperElement.style.position="fixed",this.headWrapperElement.style.top=0,this.headWrapperElement.style.zIndex=2,this.headWrapperElement.style.width=i+"px",this.bodyWrapperElement.style.paddingTop=l+"px",this.headWrapperElement.dataset.isFixed=!0,e=!0),e&&n+r<a?this.headWrapperElement.style.transform="translate3d(0, "+(n+r-a)+"px, 0)":this.headWrapperElement.style.transform=null,t!==i&&(this.headWrapperElement.style.width=i+"px")}_syncHorizontalScroll(e,t){e=e.scrollLeft;this.scrollLeft!==e&&(this.scrollLeft=e,t.scrollLeft=e)}_handleHorizontalScroll(e){var t=e.target,e=t.nextSibling||t.previousSibling;this._syncHorizontalScroll(t,e)}_handleWindowScroll(){this._syncHeadPosition()}_handleWindowResize(){this._syncHeadPosition()}destroy(){window.removeEventListener("scroll",this._handleWindowScrollThrottled,!1),window.removeEventListener("resize",this._handleWindowResizeThrottled),this.headWrapperElement.removeEventListener("scroll",this._handleBodyWrapperHorizontalScrollThrottled,!1),this.bodyWrapperElement.addEventListener("scroll",this._handleBodyWrapperHorizontalScrollThrottled,!1)}};e=e.StickyTable;return e});
